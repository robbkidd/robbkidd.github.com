<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Windows | Slightly Ahead of Behind the Curve]]></title>
  <link href="http://thekidds.org/blog/categories/windows/atom.xml" rel="self"/>
  <link href="http://thekidds.org/"/>
  <updated>2015-09-13T18:17:40-04:00</updated>
  <id>http://thekidds.org/</id>
  <author>
    <name><![CDATA[Robb Kidd]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[RC file for your Windows Command Prompt]]></title>
    <link href="http://thekidds.org/blog/2012/07/06/rc-file-for-your-windows-command-prompt/"/>
    <updated>2012-07-06T14:41:00-04:00</updated>
    <id>http://thekidds.org/blog/2012/07/06/rc-file-for-your-windows-command-prompt</id>
    <content type="html"><![CDATA[<p>I had trouble today with my Windows <code>%HOME%</code> changing and throwing off
<a href="http://vagrantup.com">Vagrant</a>&rsquo;s awareness of what boxes are installed.
This may be your problem if Vagrant on Windows was working happily for
you and then barks about no boxes.</p>

<p><code>``
C:\Users\you&gt; vagrant box list
There are no installed boxes! Use</code>vagrant box add` to add some.</p>

<p>C:\Users\you>dir /b .vagrant.d\boxes
base-i-really-exist
centos-does-too</p>

<p>C:\Users\you>echo %HOME%
<somewhere not C:\Users\you></p>

<p>C:\Users\you>set HOME=%USERPROFILE%</p>

<p>C:\Users\you>vagrant box list
base-i-really-exist
centos-does-too
```</p>

<p><code>%HOME%</code> was different depending on whether I logged into Windows while
on my Active Directory managed network or while I was offline. When on
the AD network, <code>%HOME%</code> is set by policy to a mapped drive. When offline,
<code>%HOME%</code> is my Windows <code>%USERPROFILE%</code>. I installed Vagrant and some base
boxes while off my AD network and everything worked as expected. Base boxes
were added to <code>%USERPROFILE%/.vagrant.d/</code>. Back in the office and logged in
on the AD network, Vagrant was no longer aware of the base boxes because
<code>%HOME%</code> now pointed at my personal mapped drive.</p>

<p>Creating a batch file to set <code>%HOME%</code> to <code>%USERPROFILE%</code> solved the problem.</p>

<p>```bat cmdrc.bat
REM %USERPROFILE%/cmdrc.bat
@echo off</p>

<p>set HOME=%USERPROFILE%
```</p>

<p>For UNIXy goodness, name it <code>cmdrc.bat</code>, place it in <code>%USERPROFILE%</code> and then add the following to the registry so that this file is run whenever a command prompt opens.</p>

<p>```text cmdrc.reg
Windows Registry Editor Version 5.00</p>

<p>[HKEY_CURRENT_USER\Software\Microsoft\Command Processor]
&ldquo;AutoRun&rdquo;=&ldquo;%USERPROFILE%\cmdrc.bat&rdquo;
```</p>
]]></content>
  </entry>
  
</feed>
